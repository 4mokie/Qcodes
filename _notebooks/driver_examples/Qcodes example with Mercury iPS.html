

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>QCodes example with Mercury iPS &mdash; QCoDeS 0.1.11 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Example for Minicircuits Switch Boxes controlled via USB" href="Qcodes example with Minicircuits Switch boxes (USB-XSPDT).html" />
    <link rel="prev" title="Lakeshore 325 driver example" href="Qcodes example with Lakeshore 325.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> QCoDeS
          

          
          </a>

          
            
            
              <div class="version">
                0.1.11
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">Get Help</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dataset/index.html">DataSet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">Classes and Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/generated/qcodes.instrument_drivers.html">qcodes.instrument_drivers package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Qcodes project plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes/index.html">Changelogs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../examples/index.html">Examples of using QCoDeS</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#basic-examples">Basic examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#dataset">DataSet</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../examples/index.html#drivers">Drivers</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="QCodes example Rigol DG1062.html">Example notebook for the Rigol DG 1062 instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCodes example with SR830.html">QCoDeS example with SR830</a></li>
<li class="toctree-l3"><a class="reference internal" href="QCodes_example_with_SR86x_with_buffered_readout.html">Standford Research SR86x Lock-in Amplifier example (with buffered readout)</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example ATS_ONWORK.html">Qcodes example ATS_ONWORK</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Agilent 34400A.html">Qcodes example with Agilent 34400A</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Alazar 9360.html">Qcodes example with Alazar ATS 9360</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Decadac.html">Qcodes example with Decadac</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Ithaco.html">Qcodes example with Ithaco</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Keithley 2600.html">Qcodes example with Keithley 2600</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Keysight 33500B.html">Qcodes example with Keysight 33500B</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Lakeshore 325.html">Lakeshore 325 driver example</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Lakeshore 325.html#go-to-a-set-point">Go to a set point</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">QCodes example with Mercury iPS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#initial-instantiation-connection">Initial instantiation/connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="#basic-driver-idea">Basic driver idea</a></li>
<li class="toctree-l4"><a class="reference internal" href="#safe-regions">Safe regions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#two-different-ramps">Two different ramps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#parameter-overview">Parameter overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ramp-examples">Ramp examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Minicircuits Switch boxes (USB-XSPDT).html">Example for Minicircuits Switch Boxes controlled via USB</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Newport AG-UC8.html">Qcodes example with Newport AG-UC8 piezo motion controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with QDac.html">Qcodes example with QDac</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with QDac_channels.html">Qcodes example with QDac_channels</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with R&amp;S HMC8043.html">Qcodes example with R&amp;S HMC 8043 Power supply</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Rigol DP832.html">Qcodes example with Rigol DP832 Power supply</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Rohde Schwarz RTO 1000 series Oscilloscope.html">Qcodes example with Rohde Schwarz RTO 1000 series Oscilloscope</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Rohde Schwarz ZNB.html">Qcodes example with Rohde Schwarz ZN20/8</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Signal Hound USB-SA124B.html">Frequency trace</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Signal Hound USB-SA124B.html#averaging">Averaging</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Signal Hound USB-SA124B.html#power">Power</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with TPS2012.html">QCoDeS Example with Tektronix TPS2012</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Tektronix AWG5014C.html">QCoDeS Example with Tektronix AWG5014</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Tektronix AWG70002A.html">QCoDeS Example with Tektronix AWG70002A</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Triton.html">Qcodes example with Triton</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with Yokogawa GS2xx.html">Qcodes example with Yokogawa GS200/GS210</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes example with ZI UHF-LI.html">QCoDeS Example with ZI UHF-LI</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes+broadbean_example_with_Tektronix_AWG5208.html">Qcodes+broadbean example with Tektronix AWG5208</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes+broadbean_example_with_Tektronix_AWG5208.html#part-3-play-it-and-capture-it-on-a-scope">Part 3: Play it and capture it on a scope</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes_example_with_AMI430.html">QCoDeS example with AMI430</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes_example_with_HP8753D.html">Qcodes example with HP8753D</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes_example_with_Keysight_Infiniium_Oscilloscope.html">Example Notebook for Keysight Infiniium Oscilloscopes</a></li>
<li class="toctree-l3"><a class="reference internal" href="Qcodes_example_with_Keysight_Network_Analyzer.html">Example Notebook for Keysight Network Analyzers</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/index.html#benchmarking">Benchmarking</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">QCoDeS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../examples/index.html">Examples of using QCoDeS</a> &raquo;</li>
        
      <li>QCodes example with Mercury iPS</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/_notebooks/driver_examples/Qcodes example with Mercury iPS.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="qcodes-example-with-mercury-ips">
<h1>QCodes example with Mercury iPS<a class="headerlink" href="#qcodes-example-with-mercury-ips" title="Permalink to this headline">¶</a></h1>
<div class="section" id="initial-instantiation-connection">
<h2>Initial instantiation/connection<a class="headerlink" href="#initial-instantiation-connection" title="Permalink to this headline">¶</a></h2>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">qcodes.instrument_drivers.oxford.MercuryiPS_VISA</span> <span class="k">import</span> <span class="n">MercuryiPS</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="k">import</span> <span class="n">sleep</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Note that the MercuryiPS_VISA is a VISA instrument using</span>
<span class="c1"># a socket connection. The VISA resource name therefore</span>
<span class="c1"># contains the port number and the word &#39;SOCKET&#39;</span>
<span class="n">mips</span> <span class="o">=</span> <span class="n">MercuryiPS</span><span class="p">(</span><span class="s1">&#39;mips&#39;</span><span class="p">,</span> <span class="s1">&#39;TCPIP0::192.168.15.106::7020::SOCKET&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Connected</span> <span class="n">to</span><span class="p">:</span> <span class="n">OXFORD</span> <span class="n">INSTRUMENTS</span> <span class="n">MERCURY</span> <span class="n">IPS</span> <span class="p">(</span><span class="n">serial</span><span class="p">:</span><span class="mi">170150002</span><span class="p">,</span> <span class="n">firmware</span><span class="p">:</span><span class="mf">2.5</span><span class="o">.</span><span class="mf">08.000</span><span class="p">)</span> <span class="ow">in</span> <span class="mf">0.10</span><span class="n">s</span>
</pre></div>
</div>
</div>
<div class="section" id="basic-driver-idea">
<h2>Basic driver idea<a class="headerlink" href="#basic-driver-idea" title="Permalink to this headline">¶</a></h2>
<p>The driver mainly deals with <strong>field values</strong> in Tesla. The driver is
aware of the field values in three coordinate systems, cartesian,
spherical, and cylindrical. The driver thus exposes the field
coordinates x, y, z, phi, theta, rho, and r. Each coordinate comes in
two versions: <strong>target</strong> and <strong>measured</strong>.</p>
<p>The idea is that the magnetic field is always changed in two steps;
first a target is set, then the magnet is asked to ramp to said target.</p>
</div>
<div class="section" id="safe-regions">
<h2>Safe regions<a class="headerlink" href="#safe-regions" title="Permalink to this headline">¶</a></h2>
<p>In addition to the safety limits baked in to the physical instrument,
the driver can accept a safety limit function provided by the user. The
function checks - upon receiving a new field target - whether the target
is inside an allowed region.</p>
<p>The limit function must take input arguments Bx, By, Bz (in Tesla) and
return a boolean that tells us whether that field value is safe.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># example: the safe region is a sphere</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>


<span class="k">def</span> <span class="nf">spherical_limit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Safe region is a sphere of radius 1 T</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">y</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">z</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">1</span>

<span class="c1"># assign the limit function (this can also be done at init)</span>
<span class="n">mips</span><span class="o">.</span><span class="n">set_new_field_limits</span><span class="p">(</span><span class="n">spherical_limit</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="two-different-ramps">
<h2>Two different ramps<a class="headerlink" href="#two-different-ramps" title="Permalink to this headline">¶</a></h2>
<p>The driver can perfom the ramp in two different ways: <em>simultaneous</em>
ramping or <em>safe</em> ramping.</p>
<p>When simultaneously ramping, all three field components are ramped at
the same time. This method is non-blocking, and it is thus possible to
query the field while it is ramping. The method does, however, <strong>not</strong>
guarantee that the field stays inside the allowed region during the
ramp. If the different axes have different ramp speeds, this is a real
risk.</p>
<p>When safely ramping, all field components that are ramped <em>towards</em> the
origin are ramped before those who are ramped <em>away from</em> the origin.
The ramp is thus sequential and blocking, but if the safe region is
convex (and contains the origin), you are guaranteed the the field never
exceeds the safe region.</p>
</div>
<div class="section" id="parameter-overview">
<h2>Parameter overview<a class="headerlink" href="#parameter-overview" title="Permalink to this headline">¶</a></h2>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mips</span><span class="o">.</span><span class="n">print_readable_snapshot</span><span class="p">(</span><span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mips</span><span class="p">:</span>
    <span class="n">parameter</span>     <span class="n">value</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">IDN</span>            <span class="p">:</span>    <span class="p">{</span><span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="s1">&#39;MERCURY IPS&#39;</span><span class="p">,</span> <span class="s1">&#39;vendor&#39;</span><span class="p">:</span> <span class="s1">&#39;OXFORD INSTRUMENTS&#39;</span><span class="p">,</span> <span class="s1">&#39;se...</span>
<span class="n">phi_measured</span>   <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">phi_target</span>     <span class="p">:</span>    <span class="o">-</span><span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">r_measured</span>     <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">r_target</span>       <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">rho_measured</span>   <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">rho_target</span>     <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">theta_measured</span> <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">theta_target</span>   <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">timeout</span>        <span class="p">:</span>    <span class="mi">5</span> <span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">x_measured</span>     <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">x_target</span>       <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">y_measured</span>     <span class="p">:</span>    <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">y_target</span>       <span class="p">:</span>    <span class="o">-</span><span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">z_measured</span>     <span class="p">:</span>    <span class="o">-</span><span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">z_target</span>       <span class="p">:</span>    <span class="o">-</span><span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">mips_GRPX</span><span class="p">:</span>
    <span class="n">parameter</span>         <span class="n">value</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">ATOB</span>               <span class="p">:</span>        <span class="mf">59.451</span> <span class="p">(</span><span class="n">A</span><span class="o">/</span><span class="n">T</span><span class="p">)</span>
<span class="n">current</span>            <span class="p">:</span>        <span class="mf">0.0006</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">current_persistent</span> <span class="p">:</span>        <span class="mf">0.0006</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">current_ramp_rate</span>  <span class="p">:</span>        <span class="mf">0.59451</span> <span class="p">(</span><span class="n">A</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="n">current_target</span>     <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">field</span>              <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">field_persistent</span>   <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">field_ramp_rate</span>    <span class="p">:</span>        <span class="mf">0.01</span> <span class="p">(</span><span class="n">T</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="n">field_target</span>       <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">ramp_status</span>        <span class="p">:</span>        <span class="n">HOLD</span>
<span class="n">voltage</span>            <span class="p">:</span>        <span class="o">-</span><span class="mf">0.0003</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="n">mips_GRPY</span><span class="p">:</span>
    <span class="n">parameter</span>         <span class="n">value</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">ATOB</span>               <span class="p">:</span>        <span class="mf">59.301</span> <span class="p">(</span><span class="n">A</span><span class="o">/</span><span class="n">T</span><span class="p">)</span>
<span class="n">current</span>            <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">current_persistent</span> <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">current_ramp_rate</span>  <span class="p">:</span>        <span class="mf">0.59301</span> <span class="p">(</span><span class="n">A</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="n">current_target</span>     <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">field</span>              <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">field_persistent</span>   <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">field_ramp_rate</span>    <span class="p">:</span>        <span class="mf">0.01</span> <span class="p">(</span><span class="n">T</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="n">field_target</span>       <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">ramp_status</span>        <span class="p">:</span>        <span class="n">HOLD</span>
<span class="n">voltage</span>            <span class="p">:</span>        <span class="o">-</span><span class="mf">0.0002</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span>
<span class="n">mips_GRPZ</span><span class="p">:</span>
    <span class="n">parameter</span>         <span class="n">value</span>
<span class="o">--------------------------------------------------------------------------------</span>
<span class="n">ATOB</span>               <span class="p">:</span>        <span class="mf">18.168</span> <span class="p">(</span><span class="n">A</span><span class="o">/</span><span class="n">T</span><span class="p">)</span>
<span class="n">current</span>            <span class="p">:</span>        <span class="o">-</span><span class="mf">0.0001</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">current_persistent</span> <span class="p">:</span>        <span class="o">-</span><span class="mf">0.0001</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">current_ramp_rate</span>  <span class="p">:</span>        <span class="mf">0.18168</span> <span class="p">(</span><span class="n">A</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="n">current_target</span>     <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">A</span><span class="p">)</span>
<span class="n">field</span>              <span class="p">:</span>        <span class="o">-</span><span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">field_persistent</span>   <span class="p">:</span>        <span class="o">-</span><span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">field_ramp_rate</span>    <span class="p">:</span>        <span class="mf">0.01</span> <span class="p">(</span><span class="n">T</span><span class="o">/</span><span class="n">s</span><span class="p">)</span>
<span class="n">field_target</span>       <span class="p">:</span>        <span class="mi">0</span> <span class="p">(</span><span class="n">T</span><span class="p">)</span>
<span class="n">ramp_status</span>        <span class="p">:</span>        <span class="n">HOLD</span>
<span class="n">voltage</span>            <span class="p">:</span>        <span class="mf">0.0001</span> <span class="p">(</span><span class="n">V</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="ramp-examples">
<h2>Ramp examples<a class="headerlink" href="#ramp-examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="first-example-invalid-targets">
<h3>First example: invalid targets<a class="headerlink" href="#first-example-invalid-targets" title="Permalink to this headline">¶</a></h3>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mips</span><span class="o">.</span><span class="n">x_target</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># so far, so good</span>
<span class="n">mips</span><span class="o">.</span><span class="n">y_target</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># this takes us out of the unit sphere</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---------------------------------------------------------------------------</span>

<span class="ne">ValueError</span>                                <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">5</span><span class="o">-</span><span class="n">a6fc2471013f</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
      <span class="mi">1</span> <span class="n">mips</span><span class="o">.</span><span class="n">x_target</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># so far, so good</span>
<span class="o">----&gt;</span> <span class="mi">2</span> <span class="n">mips</span><span class="o">.</span><span class="n">y_target</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># this takes us out of the unit sphere</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">instrument</span>\<span class="n">parameter</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">284</span>         <span class="k">else</span><span class="p">:</span>
    <span class="mi">285</span>             <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;set&#39;</span><span class="p">):</span>
<span class="o">--&gt;</span> <span class="mi">286</span>                 <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">287</span>             <span class="k">else</span><span class="p">:</span>
    <span class="mi">288</span>                 <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;no set cmd found in&#39;</span> <span class="o">+</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">instrument</span>\<span class="n">parameter</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">set_wrapper</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">478</span>             <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="mi">479</span>                 <span class="n">e</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;setting </span><span class="si">{}</span><span class="s1"> to </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">),)</span>
<span class="o">--&gt;</span> <span class="mi">480</span>                 <span class="k">raise</span> <span class="n">e</span>
    <span class="mi">481</span>
    <span class="mi">482</span>         <span class="k">return</span> <span class="n">set_wrapper</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">instrument</span>\<span class="n">parameter</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">set_wrapper</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">462</span>                     <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
    <span class="mi">463</span>
<span class="o">--&gt;</span> <span class="mi">464</span>                     <span class="n">set_function</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">465</span>                     <span class="bp">self</span><span class="o">.</span><span class="n">raw_value</span> <span class="o">=</span> <span class="n">raw_value</span>
    <span class="mi">466</span>                     <span class="bp">self</span><span class="o">.</span><span class="n">_save_val</span><span class="p">(</span><span class="n">val_step</span><span class="p">,</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">utils</span>\<span class="n">command</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="mi">175</span>             <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
    <span class="mi">176</span>                 <span class="s1">&#39;command takes exactly </span><span class="si">{}</span><span class="s1"> args&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">arg_count</span><span class="p">))</span>
<span class="o">--&gt;</span> <span class="mi">177</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exec_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">instrument_drivers</span>\<span class="n">oxford</span>\<span class="n">MercuryiPS_VISA</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">_set_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
    <span class="mi">300</span>
    <span class="mi">301</span>         <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_limits</span><span class="p">(</span><span class="o">*</span><span class="n">valid_vec</span><span class="o">.</span><span class="n">get_components</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">)):</span>
<span class="o">--&gt;</span> <span class="mi">302</span>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Cannot set </span><span class="si">{coordinate}</span><span class="s1"> target to </span><span class="si">{target}</span><span class="s1">, &#39;</span>
    <span class="mi">303</span>                              <span class="s1">&#39;that would violate the field_limits. &#39;</span><span class="p">)</span>
    <span class="mi">304</span>


<span class="ne">ValueError</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Cannot set y target to 0.5, that would violate the field_limits. &#39;</span><span class="p">,</span> <span class="s1">&#39;setting mips_y_target to 0.5&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># reset and try in a different coordinate system</span>
<span class="n">mips</span><span class="o">.</span><span class="n">x_target</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">mips</span><span class="o">.</span><span class="n">r_target</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">---------------------------------------------------------------------------</span>

<span class="ne">ValueError</span>                                <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">)</span>

<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">6</span><span class="o">-</span><span class="mi">9253033</span><span class="n">a050c</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span><span class="p">()</span>
      <span class="mi">1</span> <span class="c1"># reset and try in a different coordinate system</span>
      <span class="mi">2</span> <span class="n">mips</span><span class="o">.</span><span class="n">x_target</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="o">----&gt;</span> <span class="mi">3</span> <span class="n">mips</span><span class="o">.</span><span class="n">r_target</span><span class="p">(</span><span class="mf">1.1</span><span class="p">)</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">instrument</span>\<span class="n">parameter</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">284</span>         <span class="k">else</span><span class="p">:</span>
    <span class="mi">285</span>             <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;set&#39;</span><span class="p">):</span>
<span class="o">--&gt;</span> <span class="mi">286</span>                 <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">287</span>             <span class="k">else</span><span class="p">:</span>
    <span class="mi">288</span>                 <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;no set cmd found in&#39;</span> <span class="o">+</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">instrument</span>\<span class="n">parameter</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">set_wrapper</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">478</span>             <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="mi">479</span>                 <span class="n">e</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">e</span><span class="o">.</span><span class="n">args</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39;setting </span><span class="si">{}</span><span class="s1"> to </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">),)</span>
<span class="o">--&gt;</span> <span class="mi">480</span>                 <span class="k">raise</span> <span class="n">e</span>
    <span class="mi">481</span>
    <span class="mi">482</span>         <span class="k">return</span> <span class="n">set_wrapper</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">instrument</span>\<span class="n">parameter</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">set_wrapper</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">462</span>                     <span class="n">t0</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">perf_counter</span><span class="p">()</span>
    <span class="mi">463</span>
<span class="o">--&gt;</span> <span class="mi">464</span>                     <span class="n">set_function</span><span class="p">(</span><span class="n">raw_value</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="mi">465</span>                     <span class="bp">self</span><span class="o">.</span><span class="n">raw_value</span> <span class="o">=</span> <span class="n">raw_value</span>
    <span class="mi">466</span>                     <span class="bp">self</span><span class="o">.</span><span class="n">_save_val</span><span class="p">(</span><span class="n">val_step</span><span class="p">,</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">utils</span>\<span class="n">command</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
    <span class="mi">175</span>             <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
    <span class="mi">176</span>                 <span class="s1">&#39;command takes exactly </span><span class="si">{}</span><span class="s1"> args&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">arg_count</span><span class="p">))</span>
<span class="o">--&gt;</span> <span class="mi">177</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">exec_function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>


<span class="n">c</span><span class="p">:</span>\<span class="n">users</span>\<span class="n">qcodes</span><span class="o">-</span><span class="n">william</span>\<span class="n">desktop</span>\<span class="n">qcodes</span>\<span class="n">qcodes</span>\<span class="n">instrument_drivers</span>\<span class="n">oxford</span>\<span class="n">MercuryiPS_VISA</span><span class="o">.</span><span class="n">py</span> <span class="ow">in</span> <span class="n">_set_target</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coordinate</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
    <span class="mi">300</span>
    <span class="mi">301</span>         <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_field_limits</span><span class="p">(</span><span class="o">*</span><span class="n">valid_vec</span><span class="o">.</span><span class="n">get_components</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s1">&#39;z&#39;</span><span class="p">)):</span>
<span class="o">--&gt;</span> <span class="mi">302</span>             <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Cannot set </span><span class="si">{coordinate}</span><span class="s1"> target to </span><span class="si">{target}</span><span class="s1">, &#39;</span>
    <span class="mi">303</span>                              <span class="s1">&#39;that would violate the field_limits. &#39;</span><span class="p">)</span>
    <span class="mi">304</span>


<span class="ne">ValueError</span><span class="p">:</span> <span class="p">(</span><span class="s1">&#39;Cannot set r target to 1.1, that would violate the field_limits. &#39;</span><span class="p">,</span> <span class="s1">&#39;setting mips_r_target to 1.1&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="second-example-simul-ramps-to-the-origin">
<h3>Second example: simul ramps to the origin<a class="headerlink" href="#second-example-simul-ramps-to-the-origin" title="Permalink to this headline">¶</a></h3>
<p>First we ramp the field to Bx = 1, By = 0, Bz = 0, the ramp it down to
zero along theta=45, phi=30</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mips</span><span class="o">.</span><span class="n">GRPX</span><span class="o">.</span><span class="n">field_ramp_rate</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">mips</span><span class="o">.</span><span class="n">GRPY</span><span class="o">.</span><span class="n">field_ramp_rate</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
<span class="n">mips</span><span class="o">.</span><span class="n">GRPZ</span><span class="o">.</span><span class="n">field_ramp_rate</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>

<span class="n">mips</span><span class="o">.</span><span class="n">x_target</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>

<span class="n">mips</span><span class="o">.</span><span class="n">ramp</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;simul&#39;</span><span class="p">)</span>

<span class="c1"># since simul mode is non-blocking,</span>
<span class="c1"># we can read out during the ramp</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Ramping X to {mips.x_target()} T, now at {mips.x_measured()} T&#39;</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0061</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0177</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0297</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0408</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0526</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0637</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0637</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0756</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0867</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0962</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0987</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0995</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0998</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0999</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.1</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.1</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.1</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">X</span> <span class="n">to</span> <span class="mf">0.1</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.1</span> <span class="n">T</span>
</pre></div>
</div>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mips</span><span class="o">.</span><span class="n">theta_target</span><span class="p">(</span><span class="mi">45</span><span class="p">)</span>
<span class="n">mips</span><span class="o">.</span><span class="n">phi_target</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
<span class="n">mips</span><span class="o">.</span><span class="n">r_target</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">mips</span><span class="o">.</span><span class="n">ramp</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;simul&#39;</span><span class="p">)</span>

<span class="c1"># since simul mode is non-blocking,</span>
<span class="c1"># we can read out during the ramp</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Ramping r to {mips.r_target()} T, now at {mips.r_measured()} T&#39;</span><span class="p">)</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.1</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.1</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0938</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0814</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0702</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0583</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0472</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0354</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0354</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0235</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0124</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0031</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0012</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0004</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0002</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0001</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0001</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0</span> <span class="n">T</span>
<span class="n">Ramping</span> <span class="n">r</span> <span class="n">to</span> <span class="mi">0</span> <span class="n">T</span><span class="p">,</span> <span class="n">now</span> <span class="n">at</span> <span class="mf">0.0</span> <span class="n">T</span>
</pre></div>
</div>
</div>
<div class="section" id="third-example-safe-ramp-away-from-the-origin">
<h3>Third example: safe ramp away from the origin<a class="headerlink" href="#third-example-safe-ramp-away-from-the-origin" title="Permalink to this headline">¶</a></h3>
<p>At the origin, we can not <strong>measure</strong> what theta and phi is, but the
driver remembers it.</p>
<p>If we ramp up again and measure, we should get back our target values.
We use blocking safe ramp for this in order to not measure prematurely.</p>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mips</span><span class="o">.</span><span class="n">r_target</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>

<span class="n">mips</span><span class="o">.</span><span class="n">ramp</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;safe&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Ramped back out again.&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;Field values are: theta: {mips.theta_measured()}, phi: {mips.phi_measured()}&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ramped</span> <span class="n">back</span> <span class="n">out</span> <span class="n">again</span><span class="o">.</span>
<span class="n">Field</span> <span class="n">values</span> <span class="n">are</span><span class="p">:</span> <span class="n">theta</span><span class="p">:</span> <span class="mf">45.04086424151503</span><span class="p">,</span> <span class="n">phi</span><span class="p">:</span> <span class="mf">30.046435246810503</span>
</pre></div>
</div>
</div>
<div class="section" id="that-s-it-for-now-happy-sweeping">
<h3>That’s it for now! Happy sweeping.<a class="headerlink" href="#that-s-it-for-now-happy-sweeping" title="Permalink to this headline">¶</a></h3>
<div class="code ipython3 highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># sweep back down for good measures</span>
<span class="n">mips</span><span class="o">.</span><span class="n">x_target</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">mips</span><span class="o">.</span><span class="n">y_target</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">mips</span><span class="o">.</span><span class="n">z_target</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">mips</span><span class="o">.</span><span class="n">ramp</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;safe&#39;</span><span class="p">)</span>

<span class="n">mips</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Qcodes example with Minicircuits Switch boxes (USB-XSPDT).html" class="btn btn-neutral float-right" title="Example for Minicircuits Switch Boxes controlled via USB" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Qcodes example with Lakeshore 325.html" class="btn btn-neutral" title="Lakeshore 325 driver example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.11',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>