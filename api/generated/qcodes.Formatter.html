

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>qcodes.Formatter &mdash; QCoDeS 0.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="QCoDeS 0.1.0 documentation" href="../../index.html"/>
        <link rel="up" title="Public" href="../public.html"/>
        <link rel="next" title="qcodes.GNUPlotFormat" href="qcodes.GNUPlotFormat.html"/>
        <link rel="prev" title="qcodes.DataArray" href="qcodes.DataArray.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> QCoDeS
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community/index.html">Community Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Classes and Functions</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../public.html">Public</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../public.html#classes-and-functions">Classes and Functions</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../public.html#station">Station</a></li>
<li class="toctree-l4"><a class="reference internal" href="../public.html#loops">Loops</a></li>
<li class="toctree-l4"><a class="reference internal" href="../public.html#actions">Actions</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../public.html#data">Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../public.html#instrument">Instrument</a></li>
<li class="toctree-l4"><a class="reference internal" href="../public.html#utils-misc">Utils &amp; misc</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../private.html">Private</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../roadmap.html">Qcodes project plan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes/index.html">Changelogs</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">QCoDeS</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../index.html">Classes and Functions</a> &raquo;</li>
      
          <li><a href="../public.html">Public</a> &raquo;</li>
      
    <li>qcodes.Formatter</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/api/generated/qcodes.Formatter.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="qcodes-formatter">
<h1>qcodes.Formatter<a class="headerlink" href="#qcodes-formatter" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="qcodes.Formatter">
<em class="property">class </em><code class="descclassname">qcodes.</code><code class="descname">Formatter</code><a class="reference internal" href="../../_modules/qcodes/data/format.html#Formatter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qcodes.Formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/3/library/functions.html#object" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">object</span></code></a></p>
<p>Data file formatters</p>
<p>Formatters translate between DataSets and data files.</p>
<dl class="docutils">
<dt>Each Formatter is expected to implement a write method:</dt>
<dd>write(self, data_set)</dd>
<dt>and either read or read_one_file:</dt>
<dd><p class="first">read(self, data_set)
read_one_file(data_set, f, ids_read)</p>
<blockquote class="last">
<div><p>f: a file-like object supporting .readline() and for ... in
ids_read: a set of array_id&#8217;s we&#8217;ve already encountered, so</p>
<blockquote>
<div>read_one_file can check for duplication and consistency</div></blockquote>
</div></blockquote>
</dd>
<dt>data_set is a DataSet object, which is expected to have attributes:</dt>
<dd><p class="first">io: an IO manager (see qcodes.io)
location: a string, like a file path, that identifies the DataSet and</p>
<blockquote>
<div>tells the IO manager where to store it</div></blockquote>
<dl class="last docutils">
<dt>arrays: a dict of {array_id:DataArray} to read into.</dt>
<dd><ul class="first last simple">
<li>read will create DataArrays that don&#8217;t yet exist.</li>
<li>write will write ALL DataArrays in the DataSet, using
last_saved_index and modified_range, as well as whether or not
it found the specified file, to determine how much to write.</li>
</ul>
</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="qcodes.Formatter.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qcodes.Formatter.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize self.  See help(type(self)) for accurate signature.</p>
</dd></dl>

<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#qcodes.Formatter.group_arrays" title="qcodes.Formatter.group_arrays"><code class="xref py py-obj docutils literal"><span class="pre">group_arrays</span></code></a>(arrays)</td>
<td>find the sets of arrays which share all the same setpoint arrays</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#qcodes.Formatter.match_save_range" title="qcodes.Formatter.match_save_range"><code class="xref py py-obj docutils literal"><span class="pre">match_save_range</span></code></a>(group,&nbsp;file_exists[,&nbsp;...])</td>
<td>Find the save range that will capture all changes in an array group.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#qcodes.Formatter.read" title="qcodes.Formatter.read"><code class="xref py py-obj docutils literal"><span class="pre">read</span></code></a>(data_set)</td>
<td>Read the entire DataSet by finding all files matching its location (using io_manager.list) and calling read_one_file from the Formatter subclass.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#qcodes.Formatter.read_metadata" title="qcodes.Formatter.read_metadata"><code class="xref py py-obj docutils literal"><span class="pre">read_metadata</span></code></a>(data_set)</td>
<td>Read the metadata from this DataSet from storage.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#qcodes.Formatter.read_one_file" title="qcodes.Formatter.read_one_file"><code class="xref py py-obj docutils literal"><span class="pre">read_one_file</span></code></a>(data_set,&nbsp;f,&nbsp;ids_read)</td>
<td>Formatter subclasses that handle multiple data files may choose to override this method, which handles one file at a time.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#qcodes.Formatter.write" title="qcodes.Formatter.write"><code class="xref py py-obj docutils literal"><span class="pre">write</span></code></a>(data_set,&nbsp;io_manager,&nbsp;location)</td>
<td>Write the DataSet to storage.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#qcodes.Formatter.write_metadata" title="qcodes.Formatter.write_metadata"><code class="xref py py-obj docutils literal"><span class="pre">write_metadata</span></code></a>(data_set,&nbsp;io_manager,&nbsp;location)</td>
<td>Write the metadata for this DataSet to storage.</td>
</tr>
</tbody>
</table>
<dl class="class">
<dt id="qcodes.Formatter.ArrayGroup">
<em class="property">class </em><code class="descname">ArrayGroup</code><span class="sig-paren">(</span><em>shape</em>, <em>set_arrays</em>, <em>data</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes.Formatter.ArrayGroup" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.5)"><code class="xref py py-class docutils literal"><span class="pre">tuple</span></code></a></p>
<dl class="method">
<dt id="qcodes.Formatter.ArrayGroup.__getnewargs__">
<code class="descname">__getnewargs__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qcodes.Formatter.ArrayGroup.__getnewargs__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return self as a plain tuple.  Used by copy and pickle.</p>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.ArrayGroup.__getstate__">
<code class="descname">__getstate__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qcodes.Formatter.ArrayGroup.__getstate__" title="Permalink to this definition">¶</a></dt>
<dd><p>Exclude the OrderedDict from pickling</p>
</dd></dl>

<dl class="staticmethod">
<dt id="qcodes.Formatter.ArrayGroup.__new__">
<em class="property">static </em><code class="descname">__new__</code><span class="sig-paren">(</span><em>_cls</em>, <em>shape</em>, <em>set_arrays</em>, <em>data</em>, <em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#qcodes.Formatter.ArrayGroup.__new__" title="Permalink to this definition">¶</a></dt>
<dd><p>Create new instance of ArrayGroup(shape, set_arrays, data, name)</p>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.ArrayGroup.__repr__">
<code class="descname">__repr__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#qcodes.Formatter.ArrayGroup.__repr__" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a nicely formatted representation string</p>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.ArrayGroup.count">
<code class="descname">count</code><span class="sig-paren">(</span><em>value</em><span class="sig-paren">)</span> &rarr; integer -- return number of occurrences of value<a class="headerlink" href="#qcodes.Formatter.ArrayGroup.count" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="qcodes.Formatter.ArrayGroup.data">
<code class="descname">data</code><a class="headerlink" href="#qcodes.Formatter.ArrayGroup.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.ArrayGroup.index">
<code class="descname">index</code><span class="sig-paren">(</span><em>value</em><span class="optional">[</span>, <em>start</em><span class="optional">[</span>, <em>stop</em><span class="optional">]</span><span class="optional">]</span><span class="sig-paren">)</span> &rarr; integer -- return first index of value.<a class="headerlink" href="#qcodes.Formatter.ArrayGroup.index" title="Permalink to this definition">¶</a></dt>
<dd><p>Raises ValueError if the value is not present.</p>
</dd></dl>

<dl class="attribute">
<dt id="qcodes.Formatter.ArrayGroup.name">
<code class="descname">name</code><a class="headerlink" href="#qcodes.Formatter.ArrayGroup.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="attribute">
<dt id="qcodes.Formatter.ArrayGroup.set_arrays">
<code class="descname">set_arrays</code><a class="headerlink" href="#qcodes.Formatter.ArrayGroup.set_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="qcodes.Formatter.ArrayGroup.shape">
<code class="descname">shape</code><a class="headerlink" href="#qcodes.Formatter.ArrayGroup.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.group_arrays">
<code class="descclassname">Formatter.</code><code class="descname">group_arrays</code><span class="sig-paren">(</span><em>arrays</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/qcodes/data/format.html#Formatter.group_arrays"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qcodes.Formatter.group_arrays" title="Permalink to this definition">¶</a></dt>
<dd><p>find the sets of arrays which share all the same setpoint arrays
so each set can be grouped together into one file
returns ArrayGroup namedtuples</p>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.match_save_range">
<code class="descclassname">Formatter.</code><code class="descname">match_save_range</code><span class="sig-paren">(</span><em>group</em>, <em>file_exists</em>, <em>only_complete=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/qcodes/data/format.html#Formatter.match_save_range"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qcodes.Formatter.match_save_range" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the save range that will capture all changes in an array group.
matches all full-sized arrays: the data arrays plus the inner loop
setpoint array</p>
<p>note: if an outer loop has changed values (without the inner
loop or measured data changing) we won&#8217;t notice it here</p>
<p>use the inner setpoint as a base and look for differences
in last_saved_index and modified_range in the data arrays</p>
<p>if <cite>only_complete</cite> is True (default), will not mark any range to be
saved unless it contains no NaN values</p>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.read">
<code class="descclassname">Formatter.</code><code class="descname">read</code><span class="sig-paren">(</span><em>data_set</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/qcodes/data/format.html#Formatter.read"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qcodes.Formatter.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the entire DataSet by finding all files matching its location
(using io_manager.list) and calling read_one_file from the Formatter
subclass. Subclasses may alternatively override this entire method.</p>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.read_metadata">
<code class="descclassname">Formatter.</code><code class="descname">read_metadata</code><span class="sig-paren">(</span><em>data_set</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/qcodes/data/format.html#Formatter.read_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qcodes.Formatter.read_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Read the metadata from this DataSet from storage.</p>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.read_one_file">
<code class="descclassname">Formatter.</code><code class="descname">read_one_file</code><span class="sig-paren">(</span><em>data_set</em>, <em>f</em>, <em>ids_read</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/qcodes/data/format.html#Formatter.read_one_file"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qcodes.Formatter.read_one_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Formatter subclasses that handle multiple data files may choose to
override this method, which handles one file at a time.</p>
<p>data_set: the DataSet we are reading into
f: a file-like object to read from
ids_read: a <cite>set</cite> of array_ids that we have already read.</p>
<blockquote>
<div>when you read an array, check that it&#8217;s not in this set (except
setpoints, which can be in several files with different inner loop)
then add it to the set so other files know not to read it again</div></blockquote>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.write">
<code class="descclassname">Formatter.</code><code class="descname">write</code><span class="sig-paren">(</span><em>data_set</em>, <em>io_manager</em>, <em>location</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/qcodes/data/format.html#Formatter.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qcodes.Formatter.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the DataSet to storage.</p>
<p>Subclasses must override this method.</p>
<p>It is up to the Formatter to decide when to overwrite completely,
and when to just append or otherwise update the file(s).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data_set</strong> (<a class="reference internal" href="qcodes.DataSet.html#qcodes.DataSet" title="qcodes.DataSet"><em>DataSet</em></a>) &#8211; the data we are writing.</li>
<li><strong>io_manager</strong> (<em>io_manager</em>) &#8211; base physical location to write to.</li>
<li><strong>location</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; the file location within the io_manager.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="qcodes.Formatter.write_metadata">
<code class="descclassname">Formatter.</code><code class="descname">write_metadata</code><span class="sig-paren">(</span><em>data_set</em>, <em>io_manager</em>, <em>location</em>, <em>read_first=True</em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/qcodes/data/format.html#Formatter.write_metadata"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#qcodes.Formatter.write_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Write the metadata for this DataSet to storage.</p>
<p>Subclasses must override this method.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>data_set</strong> (<a class="reference internal" href="qcodes.DataSet.html#qcodes.DataSet" title="qcodes.DataSet"><em>DataSet</em></a>) &#8211; the data we are writing.</li>
<li><strong>io_manager</strong> (<em>io_manager</em>) &#8211; base physical location to write to.</li>
<li><strong>location</strong> (<a class="reference external" href="http://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.5)"><em>str</em></a>) &#8211; the file location within the io_manager.</li>
<li><strong>read_first</strong> (<em>bool, optional</em>) &#8211; whether to first look for previously
saved metadata that may contain more information than the local
copy.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="qcodes.GNUPlotFormat.html" class="btn btn-neutral float-right" title="qcodes.GNUPlotFormat" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="qcodes.DataArray.html" class="btn btn-neutral" title="qcodes.DataArray" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>